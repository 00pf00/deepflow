controller-ips:
  - 127.0.0.1
# controller listening port
controller-port: 20035
# Rpc synchronization timeout default 8s
rpc-timeout: 8
# logfile path
log-file: /var/log/droplet/droplet.log
# loglevel: "debug/info/warn/error"
log-level: info
# profiler
profiler: false
# maximum usage of cpu cores, 0 means no limit
max-cpus: 0
# conf for connection with outside stream
stream: 127.0.0.1
stream-port: 20201
# conf for connection with outside zero
zero-port: 20211
# trident adapter
adapter:
  # udp socket buffer size (Bytes) for receiving trident traffic,
  # default 32MB, and maximum 2GB
  # note that the actual value will depend on the minimum between
  # socket-buffer-size and the socket config via sysctl
  socket-buffer-size: 33554432
  # cache size (#) for resuming the order of received trident traffic,
  # default value is 16
  # 0 <= value <= 256, value is 256 when value > 256
  ordering-cache-size: 16
# internal queues conf
queue:
  # ----------- 并行度 -----------
  # 传输网包的队列数量，也是网包处理（以网包作为输入，及flow-duplicator）模块的并行度，默认为1，最大16
  packet-queue-count: 1
  # 传输网流的队列数量，也是网流处理（以网流作为输入）模块的并行度，默认为1，最大16
  flow-queue-count: 1
  # 传输统计数据的队列数量，也是网包、网流统计数据序列化模块各自的并行度，默认为1，最大16
  doc-queue-count: 1
  # ---------- 全局队列长度 -----------
  # 传输网包的每个队列的长度，默认为65536
  packet-queue-size: 65536
  # 传输网流的每个队列的长度，默认为524288或packet-queue-size的8倍
  flow-queue-size: 524288
  # 传输统计数据的每个队列的长度，默认为524288或packet-queue-size的8倍
  doc-queue-size: 524288
  # ---------- 每个模块的队列长度 ----------
  # name: 1-meta-packet-to-labeler
  # labeler read queue size, default packet-queue-size
  labeler-queue-size: 65536
  # name: 2-meta-packet-to-pcap-app
  # pcap app read queue size, default packet-queue-size
  pcap-app-queue-size: 65536
  # name: 2-meta-packet-to-flow-generator
  # flow generator read queue size, default packet-queue-size
  flow-generator-queue-size: 65536
  # name: 3-meta-packet-to-metering-app
  # metering app read queue size, default packet-queue-size
  metering-app-queue-size: 65536
  # name: 3-tagged-flow-to-flow-duplicator
  # flow duplicator read queue size, default flow-queue-size
  flow-duplicator-queue-size: 524288
  # name: 4-tagged-flow-to-flow-app
  # flow app read queue size, default flow-queue-size
  flow-app-queue-size: 524288
  # name: 4-metering-doc-to-marshaller
  # metering app output queue size, default doc-queue-size
  metering-doc-marshaller-queue-size: 524288
  # name: 5-flow-doc-to-marshaller
  # flow app output queue size, default doc-queue-size
  flow-doc-marshaller-queue-size: 524288
  # name: 4-tagged-flow-to-flow-marshaller
  # flow sender queue size, default flow-queue-size
  flow-marshaller-queue-size: 524288
  # name: 5-flow-pb-to-flow-sender
  # flow sender queue size, default flow-queue-size
  flow-sender-queue-size: 524288
  # name: 6-all-doc-to-zero
  # doc sender queue size, default doc-queue-size
  doc-sender-queue-size: 524288
# internal labeler conf
labeler:
  # whether to use ddbs
  first-path-ddbs-disable: false
  # whether to use first-path processing only
  fast-path-disable: false
  # size of policy fast-path map, and
  # map-size-limit >= filter-queue-count*1024
  # map-size-limit <= filter-queue-count*1048576
  map-size-limit: 1048576
# internal flow generator conf
flow-generator:
  # concurrent flow count limit
  flow-count-limit: 4194304
  # hard output interval for long flow, in seconds
  force-report-interval: 60
  # idle timeout for established tcp flow, in seconds
  established-timeout: 300
  # idle timeout for closing tcp flow,
  # or tcp flow with rst after established,
  # or non-tcp flow with dual direction, in seconds
  closing-rst-timeout: 35
  # idle timeout for opening tcp flow,
  # or tcp flow with exception,
  # or flow with single direction, in seconds
  others-timeout: 5
  # clean interval for flow, should not be too large, in seconds
  flow-clean-interval: 1
  # flow cleaner count for every generator
  timeout-cleaner-count: 4
  # hash map size for every generator
  hash-map-size: 262166
  # report tolerance for the endtime field of a flow, in seconds
  report-tolerance: 4
  # if true, then not check mac for flow match when inport is 0x30000
  ignore-tor-mac: false
  # if true, then not check mac for flow match
  # when inport is bigger than 0x30000 and l2end is false
  ignore-l2-end: false
#geo-file-location: /opt/droplet/ip_info_mini.json
map-reduce:
  # 聚合窗口的大小，单位秒，最小值为70，调整时注意考虑report-tolerance
  window-size: 70
  # 窗口移动时，窗口边缘与数据位置的差值。该配置必须小于window-size，否则会被置为0。该配置仅对usage和fps有效
  window-move-margin: 3
pcap:
  # 计算TCP/IP checksum，默认不计算
  tcpip-checksum: false
  # 单次写入文件的块大小，默认64KB
  block-size-kb: 64
  # 同时在写的最大pcap文件数，默认5000
  max-concurrent-files: 5000
  # 每个pcap文件的最大大小，默认25MB
  max-file-size-mb: 25
  # 所有pcap文件的最大总大小，默认100GB
  max-directory-size-gb: 100
  # 磁盘剩余空间不足该数值时进行删除，默认10GB
  disk-free-space-margin-gb: 10
  # 每个pcap文件的最大时间，默认300秒
  max-file-period-second: 300
  # 每个pcap文件的保留时间，默认7天
  max-file-keep-day: 7
  # pcap文件存储的文件夹
  file-directory: /var/lib/droplet/pcap
