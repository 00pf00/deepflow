controller-ips:
  - 127.0.0.1
# controller listening port
controller-port: 20035
# Rpc synchronization timeout default 8s
rpc-timeout: 8
# logfile path
log-file: /var/log/droplet/droplet.log
# loglevel: "debug/info/warn/error"
log-level: info
# profiler
profiler: false
# maximum usage of cpu cores, 0 means no limit
max-cpus: 0
# conf for connection with outside stream
stream: 127.0.0.1
stream-port: 20201
# conf for connection with outside zero
zero-port: 20211
# trident adapter
adapter:
  # udp socket buffer size (Bytes) for receiving trident traffic,
  # default 32MB, and maximum 2GB
  # note that the actual value will depend on the minimum between
  # socket-buffer-size and the socket config via sysctl
  socket-buffer-size: 33554432
  # cache size (#) for resuming the order of received trident traffic,
  # default value is 16
  # 0 <= value <= 256, value is 256 when value > 256
  ordering-cache-size: 16
# internal queues conf
queue:
  # queue size, default 65536
  queue-size: 65536
  # labeler read queue count, default 4
  # name: 1-meta-packet-to-labeler
  labeler-queue-count: 4
  # labeler read queue size, default queue-size
  labeler-queue-size: 65536
  # flow generator read queue count, default 4
  # name: 2-meta-packet-to-flow-generator
  flow-generator-queue-count: 4
  # flow generator read queue size, default queue-size
  flow-generator-queue-size: 65536
  # metering app read queue count, default 4
  # name: 3-meta-packet-to-metering-app
  metering-app-queue-count: 4
  # metering app read queue size, default queue-size
  metering-app-queue-size: 65536
  # pcap app read queue count, default 1
  # name: 2-meta-packet-to-pcap-app
  pcap-app-queue-count: 1
  # pcap app read queue size, default queue-size
  pcap-app-queue-size: 65536
  # flow app read queue count, default 8
  # 4-tagged-flow-to-flow-app
  flow-app-queue-count: 2
  # flow app read queue size, default queue-size << 3
  flow-app-queue-size: 0
  # flow duplicator read queue size, default queue-size << 3
  # name: 3-tagged-flow-to-flow-duplicator
  flow-duplicator-queue-size: 0
  # mapreduce buffer capacity, default 524288
  docs-queue-size: 524288
  # metering app output queue count, default 1
  metering-app-output-queue-count: 1
  # metering app output queue size, default docs-queue-size << 1
  # name: 4-metering-doc-to-marshaller
  metering-app-output-queue-size: 0
  # flow app output queue count, default 1
  flow-app-output-queue-count: 1
  # flow app output queue size, default docs-queue-size << 3
  # name: 5-flow-doc-to-marshaller
  flow-app-output-queue-size: 0
  # flow sender queue size, default queue-size << 3
  # name: 4-tagged-flow-to-stream
  flow-sender-queue-size: 0
  # doc sender queue size, default docs-queue-size << 1
  doc_sender_queue_size: 0
# internal labeler conf
labeler:
  # whether to use ddbs
  first-path-ddbs-disable: false
  # whether to use first-path processing only
  fast-path-disable: false
  # size of policy fast-path map, and
  # map-size-limit >= filter-queue-count*1024
  # map-size-limit <= filter-queue-count*1048576
  map-size-limit: 1048576
# internal flow generator conf
flow-generator:
  # concurrent flow count limit
  flow-count-limit: 4194304
  # hard output interval for long flow, in seconds
  force-report-interval: 60
  # idle timeout for established tcp flow, in seconds
  established-timeout: 300
  # idle timeout for closing tcp flow,
  # or tcp flow with rst after established,
  # or non-tcp flow with dual direction, in seconds
  closing-rst-timeout: 35
  # idle timeout for opening tcp flow,
  # or tcp flow with exception,
  # or flow with single direction, in seconds
  others-timeout: 5
  # clean interval for flow, should not be too large, in seconds
  flow-clean-interval: 1
  # flow cleaner count for every generator
  timeout-cleaner-count: 4
  # hash map size for every generator
  hash-map-size: 262166
  # report tolerance for the endtime field of a flow, in seconds
  report-tolerance: 4
  # if true, then not check mac for flow match when inport is 0x30000
  ignore-tor-mac: false
  # if true, then not check mac for flow match
  # when inport is bigger than 0x30000 and l2end is false
  ignore-l2-end: false
#geo-file-location: /opt/droplet/ip_info_mini.json
map-reduce:
  # reject varied doc (with edge or port tag) when buffer usage exceed the limit, default queue.docs-queue-size
  varied-doc-limit: 0
  # 聚合窗口的大小，单位秒，最小值为70，调整时注意考虑report-tolerance
  window-size: 70
  # 窗口移动时，窗口边缘与数据位置的差值。该配置必须小于window-size，否则会被置为0。该配置仅对usage和fps有效
  window-move-margin: 3
pcap:
  # 计算TCP/IP checksum，默认不计算
  tcpip-checksum: false
  # 单次写入文件的块大小，默认64KB
  block-size-kb: 64
  # 同时在写的最大pcap文件数，默认5000
  max-concurrent-files: 5000
  # 每个pcap文件的最大大小，默认25MB
  max-file-size-mb: 25
  # 所有pcap文件的最大总大小，默认100GB
  max-directory-size-gb: 100
  # 磁盘剩余空间不足该数值时进行删除，默认10GB
  disk-free-space-margin-gb: 10
  # 每个pcap文件的最大时间，默认300秒
  max-file-period-second: 300
  # 每个pcap文件的保留时间，默认7天
  max-file-keep-day: 7
  # pcap文件存储的文件夹
  file-directory: /var/lib/droplet/pcap
